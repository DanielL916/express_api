/**
 * Created by zenit1 on 18/04/2017.
 */
"use strict";
const BeameStore = require('../../src/services/BeameStoreV2');
const Credential = require('../../src/services/Credential');

const store = new BeameStore();

let cred = new Credential(store);


cred.createVirtualEntity('b95ug2spj6n539wm.v1.d.beameio.net', 'virt_test1', 'virt@example.com','123456').then(meta=>{
	console.log(meta);
	const DirectoryServices = require('../../src/services/DirectoryServices');
	DirectoryServices.createDir(meta.path);
	var fs = require('fs'),path = require('path');
	var wstream = fs.createWriteStream(path.join(meta.path, meta.fqdn + '.pfx'));
	wstream.write(meta.pfx);
	wstream.end();




}).catch(e=>{
	console.error(e);

});